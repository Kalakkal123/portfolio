<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>CSS 3D Block Terrain Generator</title>
  <style>
    :root{
      --cols: 40;
      --rows: 25;
      --tile-size: 16px;
      --block-depth: 16px;
      --layer-spacing: 8;
      --scene-rotate-x: 55deg;
      --scene-rotate-y: -10deg;
    }

    html,body{height:100%;margin:0;background:#0f172a;color:#eef;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;display:flex;align-items:center;justify-content:center}
    .viewport{
      perspective:1000px;
      perspective-origin:50% 20%;
      width:calc(var(--cols)*var(--tile-size));
      height:calc(var(--rows)*var(--tile-size));
      border-radius:12px;
    }
    .scene{
      width:100%;height:100%;transform-style:preserve-3d;transform:rotateX(var(--scene-rotate-x)) rotateY(var(--scene-rotate-y));
      position:relative;
    }

    .block{
      position:absolute;
      transform-style:preserve-3d;
      width:var(--tile-size);
      height:var(--tile-size);
    }

    .face{
      position:absolute;
      width:100%;
      height:100%;
      background:linear-gradient(180deg,#3a3,#282);
      backface-visibility:hidden;
      border:1px solid rgba(0,0,0,0.1);
    }
    .top{transform:rotateX(90deg) translateZ(calc(var(--block-depth) / 2));background:linear-gradient(180deg,#7c5,#5a3);}
    .bottom{transform:rotateX(-90deg) translateZ(calc(var(--block-depth) / 2));background:#241;}
    .front{transform:translateZ(calc(var(--block-depth) / 2));background:linear-gradient(180deg,#493,#352);}
    .back{transform:rotateY(180deg) translateZ(calc(var(--block-depth) / 2));background:linear-gradient(180deg,#493,#352);}
    .left{transform:rotateY(-90deg) translateZ(calc(var(--block-depth) / 2));background:linear-gradient(180deg,#473,#352);}
    .right{transform:rotateY(90deg) translateZ(calc(var(--block-depth) / 2));background:linear-gradient(180deg,#473,#352);}

  </style>
</head>
<body>
  <div class="viewport">
    <div class="scene" id="scene"></div>
  </div>
  <script>
    const scene = document.getElementById('scene');
    const cols = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--cols'));
    const rows = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--rows'));
    const tile = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--tile-size'));
    const blockDepth = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--block-depth'));

    function createBlock(x, y, height){
      const block = document.createElement('div');
      block.className = 'block';
      const px = x * tile;
      const py = y * tile;
      const pz = height * blockDepth;
      block.style.transform = `translate3d(${px}px, ${py}px, ${pz}px)`;

      ['front','back','left','right','top','bottom'].forEach(face => {
        const f = document.createElement('div');
        f.className = 'face ' + face;
        block.appendChild(f);
      });

      return block;
    }

    function generateTerrain(){
      scene.innerHTML = '';
      for(let y=0;y<rows;y++){
        for(let x=0;x<cols;x++){
          const h = Math.floor(Math.random()*5);
          for(let z=0;z<=h;z++){
            const block = createBlock(x, y, z);
            scene.appendChild(block);
          }
        }
      }
    }

    // drag rotation
    (function addDrag(){
      let dragging=false, ox=0, oy=0;
      const root=document.documentElement;
      document.querySelector('.viewport').addEventListener('pointerdown', (e)=>{dragging=true; ox=e.clientX; oy=e.clientY;});
      window.addEventListener('pointerup', ()=> dragging=false);
      window.addEventListener('pointermove', (e)=>{if(!dragging)return;const dx=e.clientX-ox,dy=e.clientY-oy;ox=e.clientX;oy=e.clientY;const rx=parseFloat(getComputedStyle(root).getPropertyValue('--scene-rotate-x'))||55;const ry=parseFloat(getComputedStyle(root).getPropertyValue('--scene-rotate-y'))||-10;root.style.setProperty('--scene-rotate-x',(rx-dy*0.15)+'deg');root.style.setProperty('--scene-rotate-y',(ry+dx*0.15)+'deg');});
    })();

    generateTerrain();
  </script>
</body>
</html>
